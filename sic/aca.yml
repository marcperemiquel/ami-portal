version: 1.0.0
info:
  name: PORTAL
  version: 1.0.0
  code: '1051'
  short-name: AGO
  description: Agora - Portal
  aci:
    scm: https://gogs-aks.gencat.cat/aci/1051-portal-aci.git
components:
  - build:
      image: slaves/npm:1.0-10
      commands:
        - "npm version"
      env:
        - build_var1: "val1"
    bake:
      infrastructure:
        type: iaas
        provider: aws
        scm: https://gogs-aks.gencat.cat/1051/ami-portal.git
      image: slaves/packer:1.0-1.5
      env:
        - packer_conf_filename: "aws-portal.json"
    deployment:
      infrastructure:
        type: iaas
        provider: aws
        scm: https://gogs-aks.gencat.cat/1051/iac-portal.git
        images:
          before-deploy:
            image: 
          deploy:
            image: slaves/terraform:1.0-0.12
          after-deploy:
            image: 
      environments:
        - name: training
          actions:
            deploy:
              env:
                - value1: trn-value1
        - name: preproduction
          actions:
            deploy:
              env:
                - value1: pre-value1
        - name: production
          actions:
            deploy:
              env:
                - value1: pro-value1
notifications:
  email:
    recipients:
      - marc.peremiquel@ticxcat.cat
